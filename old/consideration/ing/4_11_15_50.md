ë””ë ‰í† ë¦¬ êµ¬ì¡° ì ê²€ ë° STT ì»¨í…Œì´ë„ˆ êµ¬í˜„ ì¤€ë¹„
================================================

ğŸ“ í”„ë¡œì íŠ¸ ë£¨íŠ¸ êµ¬ì¡° (2024-ê¸°ì¤€ ìµœì‹ )
-----------------------------------
```
ai-vtuber-project/
â”œâ”€â”€ docker-compose.yml
â”‚
â”œâ”€â”€ control-panel/
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ style.css
â”‚   â””â”€â”€ toggle.js
â”‚
â”œâ”€â”€ stt/
â”‚   â”œâ”€â”€ cpu_ws/               # Whisper base (ì •ì‹ ì¸ì‹ìš©, WebSocket)
â”‚   â”‚   â”œâ”€â”€ app.py
â”‚   â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â””â”€â”€ transcriber.py
â”‚   â”œâ”€â”€ gpu_ws/               # Whisper base (GPU ì¸ì‹ìš©, WebSocket)
â”‚   â”‚   â”œâ”€â”€ app.py
â”‚   â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â””â”€â”€ transcriber.py
â”‚   â”œâ”€â”€ tiny_ws/              # Whisper tiny (ë°œí™” ê°ì§€, WebSocket)
â”‚   â”‚   â”œâ”€â”€ app.py
â”‚   â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â””â”€â”€ transcriber.py
â”‚   â””â”€â”€ proxy/                # CPU/GPU ë¶„ê¸°ìš© ì¤‘ê³„ ì„œë²„ (REST)
â”‚       â”œâ”€â”€ app.py
â”‚       â”œâ”€â”€ Dockerfile
â”‚       â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ client/                  # ì‚¬ìš©ì ë¡œì»¬ ë§ˆì´í¬ ìº¡ì²˜ í´ë¼ì´ì–¸íŠ¸
â”‚   â””â”€â”€ audio_streaming_input/
â”‚       â”œâ”€â”€ main.py
â”‚       â”œâ”€â”€ mic_capture.py
â”‚       â”œâ”€â”€ audio_buffer.py
â”‚       â”œâ”€â”€ ws_streamer.py
â”‚       â””â”€â”€ utils.py
```

ğŸ’¡ í˜„ì¬ê¹Œì§€ êµ¬í˜„ëœ ë¶€ë¶„
----------------------
- `client/audio_streaming_input`: âœ”ï¸ ë§ˆì´í¬ ì…ë ¥ + ìŠ¬ë¼ì´ë”© ë²„í¼ + WebSocket ì „ì†¡ ëª¨ë“ˆ ì™„ë£Œ
- `control-panel`: âœ”ï¸ GPU í† ê¸€, STT ìƒíƒœ ì ê²€ ë“± UI ê¸°ëŠ¥ êµ¬ì¶• ì™„ë£Œ
- `stt/proxy`: âœ”ï¸ REST ê¸°ë°˜ STT ì¤‘ê³„ ê¸°ëŠ¥ ì™„ë£Œ

ğŸ§  ë‹¤ìŒ êµ¬í˜„ ëŒ€ìƒ: STT WebSocket ì„œë²„ ì»¨í…Œì´ë„ˆë“¤
--------------------------------------------

### 1. `stt/cpu_ws/`
- ëª©ì : Whisper base ëª¨ë¸ì„ ì´ìš©í•œ ì‹¤ì‹œê°„ WebSocket ê¸°ë°˜ STT ì²˜ë¦¬
- ê²½ë¡œ: `/ws/transcribe`
- ê¸°ëŠ¥:
  - í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° PCM ì˜¤ë””ì˜¤ ì²­í¬ ìˆ˜ì‹  (WebSocket)
  - `<flush>` ëª…ë ¹ì–´ ìˆ˜ì‹  ì‹œ ë²„í¼ ë‚´ìš© STT ì²˜ë¦¬
  - ê²°ê³¼ í…ìŠ¤íŠ¸ë¥¼ í´ë¼ì´ì–¸íŠ¸ë¡œ ë°˜í™˜

### 2. `stt/tiny_ws/`
- ëª©ì : Whisper tiny ëª¨ë¸ë¡œ ë°œí™” ê°ì§€
- ê²½ë¡œ: `/ws/detect`
- ê¸°ëŠ¥:
  - ì˜¤ë””ì˜¤ ì²­í¬ ìˆ˜ì‹  í›„ ë°”ë¡œ ê°ì§€ ìˆ˜í–‰
  - ê°ì§€ ê²°ê³¼: `{ "speech_detected": true }` ë˜ëŠ” `{ "speech_detected": false }`
  - ì˜ˆì™¸ ë°œìƒ ì‹œ: `{ "error": "..." }`

âœ”ï¸ ì¤€ë¹„ ì™„ë£Œ ìƒíƒœ
-------------------
- client ì¸¡ WebSocket êµ¬ì¡° ì™„ì„±
- nginx.conf ì— WebSocketìš© ê²½ë¡œ í”„ë¡ì‹œ ì„¤ì • ì™„ë£Œ
- docker-compose.yml ì— `stt_cpu_ws`, `stt_tiny_ws` ì„œë¹„ìŠ¤ ì •ì˜ ì™„ë£Œ

ğŸ“Œ ë‹¤ìŒ ë‹¨ê³„
-------------
1. `stt/cpu_ws` â†’ WebSocket STT ì»¨í…Œì´ë„ˆ ì½”ë“œ êµ¬í˜„
2. `stt/tiny_ws` â†’ WebSocket ë°œí™” ê°ì§€ê¸° ì»¨í…Œì´ë„ˆ êµ¬í˜„
3. í…ŒìŠ¤íŠ¸ìš© WebSocket í´ë¼ì´ì–¸íŠ¸ ì—°ê²° í›„ ì„±ëŠ¥ ì ê²€