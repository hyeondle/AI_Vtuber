# 🧏‍♂️ STT (Speech-to-Text) 성능 향상을 위한 고려사항

Whisper를 활용한 음성 인식(STT)은 AI 아바타 시스템의 핵심 기반입니다.  
음성 인식 정확도는 전체 대화 흐름, 사용자 경험, LLM 응답의 품질에 직접적인 영향을 줍니다.

다음은 Whisper STT 품질을 향상시키기 위한 주요 전략입니다.

---

## 1. 🧠 모델 크기 향상

### ✔️ 적용 방법
- Whisper 모델을 `base` → `small` → `medium` → `large`로 업그레이드
- 더 큰 모델은 더 많은 파라미터와 높은 정확도를 가짐
- 성능을 고려하여 latency를 체크하며 만족할 만한 수준 중 가장 큰 모델 선택

### ✔️ 이유 및 기대
- 더 정교한 어휘 해석 및 억양 이해 가능
- 모호하거나 약한 발음도 더 잘 인식 가능

> 기대 성능 향상: **문장 구성 정확도 향상, 문맥 오류 감소**

---

## 2. 🎙️ 음성 데이터 품질 향상 (전처리)

### ✔️ 전처리 항목
- 배경 소음 제거 (Noise Reduction)
- 볼륨 정규화 (-20 dBFS 전후)
- 단일 채널(Mono) 변환
- 샘플링 레이트 통일 (16kHz 또는 22kHz)

### ✔️ 이유 및 기대
- Whisper는 학습된 깨끗한 음성을 기준으로 작동함
- 노이즈나 왜곡된 볼륨은 성능 저하를 유발

> 기대 성능 향상: **인식 실패율 감소, 발음 정확도 향상**

---

## 3. 🌐 언어 고정 (Language Hint)

### ✔️ 적용 방법
- `language=\"ko\"` 또는 `\"en\"` 명시적 지정
- 자동 언어 감지 기능 끄기 (오탐 방지)

### ✔️ 이유 및 기대
- 자동 감지는 짧은 문장에서 실수가 잦음
- 사용자가 한국어로 말할 것이 명확할 때는 고정하는 것이 정확도 높음

> 기대 성능 향상: **언어 감지 오류 제거 → 일관된 인식 가능**

---

## 4. ⚙️ 고급 추론 파라미터 설정

### ✔️ 설정 예시
```python
result = model.transcribe(
    file,
    language=\"ko\",
    temperature=0.0,
    best_of=5,
    beam_size=5
)
```

### ✔️ 설명
- `temperature=0.0`: 가장 확실한 결과만 선택
- `best_of`, `beam_size`: 다양한 결과 탐색 후 최적 선택

> 기대 성능 향상: **자연어 해석 품질 향상, 불필요한 반복 및 오역 제거**

---

## 5. 🔁 단문/장문 처리 전략

### ✔️ 적용 방법
- 장문 입력은 일정 길이로 분할 처리
- Whisper의 window-size 한계 고려

### ✔️ 이유 및 기대
- 너무 긴 문장은 context overflow로 오류 발생 가능
- 짧고 의미 있는 구간으로 나눠 정확도 상승 가능

> 기대 성능 향상: **장문 오인식 방지, 문장 단위 정확도 향상**

---

## 6. ⚡ GPU 가속

### ✔️ 적용 방법
- `whisper.load_model(..., device=\"cuda\")`
- Docker 환경에서는 `--gpus all` 사용

### ✔️ 이유 및 기대
- 모델이 클수록 추론 속도 개선 필수
- 실시간 인식 시 지연 제거에 핵심적

> 기대 성능 향상: **지연 감소, 실시간 사용성 확보**

---

## 7. 🎤 마이크 입력 시 실시간 버퍼링/자동 감지

### ✔️ 적용 기능
- 음성 입력이 시작되었을 때만 STT 수행
- `vad`(voice activity detection) 또는 `webrtcvad` 사용

### ✔️ 이유 및 기대
- 무의미한 무음 인식 방지
- 실시간 응답 시스템에서 불필요한 연산 최소화

> 기대 성능 향상: **성능 최적화 + 반응 속도 개선**

---

## ✅ 종합 기대 효과

| 향상 요소            | 기대 효과 |
|---------------------|-----------|
| 음성 전처리         | 인식률 상승, 노이즈 최소화 |
| 모델 업그레이드     | 더 정확한 문장 해석 |
| 파라미터 튜닝       | 자연어 처리 품질 향상 |
| GPU 가속            | 실시간 인식 가능성 확보 |
| 음성 감지 적용      | 응답 속도 향상, 효율성 증가 |

---

> 💡 이 전략들을 순차적으로 반영하여, Whisper 기반 STT의 품질 개선을 목표로 하고
> 실시간 대화형 AI 시스템에 충분한 신뢰성과 응답성을 제공하고자 한다.
